<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ASX Tape Studio</title>
  <link rel="stylesheet" href="studio-ui.css">

  <!-- Monaco Editor -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/editor/editor.main.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.min.js"></script>

  <!-- Xterm.js -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css">
  <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.js"></script>
</head>
<body>

  <div id="studio-container" class="studio-layout">

    <!-- Studio Header -->
    <header class="studio-header">
      <div class="header-left">
        <span class="studio-logo">âŸ</span>
        <h1 id="studio-title">ASX Tape Studio</h1>
        <span id="tape-name" class="tape-name">No Tape Loaded</span>
      </div>

      <div class="header-center">
        <div class="studio-tabs" id="editor-tabs"></div>
      </div>

      <div class="header-right">
        <button class="btn-icon" id="save-btn" title="Save">ğŸ’¾</button>
        <button class="btn-icon" id="format-btn" title="Format">âœ¨</button>
        <button class="btn-icon" id="git-btn" title="Git">ğŸ”€</button>
        <button class="btn-icon" id="settings-btn" title="Settings">âš™ï¸</button>
        <button class="btn-icon" id="close-studio-btn" title="Close Studio">âœ•</button>
      </div>
    </header>

    <!-- Studio Main Area -->
    <div class="studio-main">

      <!-- Left Sidebar: File Tree -->
      <aside class="sidebar-left">
        <div class="sidebar-header">
          <h3>ğŸ“ Files</h3>
          <button class="btn-icon" id="new-file-btn" title="New File">+</button>
        </div>

        <div id="file-tree" class="file-tree"></div>
      </aside>

      <!-- Center: Editor + Terminal -->
      <main class="studio-center">

        <!-- Code Editor -->
        <section class="editor-section">
          <div class="editor-toolbar">
            <span id="current-file">No file open</span>
            <div class="editor-tools">
              <button class="btn-tool" id="analyze-btn">ğŸ§  Analyze with Cline</button>
              <button class="btn-tool" id="lint-btn">ğŸ” Lint</button>
            </div>
          </div>

          <div id="monaco-editor" class="monaco-editor"></div>
        </section>

        <!-- Terminal -->
        <section class="terminal-section" id="terminal-section">
          <div class="terminal-toolbar">
            <h3>ğŸ’» Terminal</h3>
            <div class="terminal-tools">
              <button class="btn-tool" id="clear-terminal-btn">Clear</button>
              <button class="btn-tool" id="new-terminal-btn">New Tab</button>
            </div>
          </div>

          <div id="terminal" class="terminal"></div>
        </section>

      </main>

      <!-- Right Sidebar: AI Chat (Cline) -->
      <aside class="sidebar-right">
        <div class="sidebar-header">
          <h3>ğŸ¤– Cline AI</h3>
          <button class="btn-icon" id="clear-chat-btn" title="Clear Chat">ğŸ—‘ï¸</button>
        </div>

        <div id="ai-chat" class="ai-chat">
          <div id="chat-messages" class="chat-messages"></div>

          <div class="chat-input-area">
            <textarea id="chat-input" placeholder="Ask Cline anything..."></textarea>
            <button id="send-chat-btn" class="btn-primary">Send</button>
          </div>
        </div>
      </aside>

    </div>

    <!-- Canvas Overlay (for visual/game dev) -->
    <div id="canvas-overlay" class="canvas-overlay hidden">
      <div class="canvas-header">
        <h3 id="canvas-title">Canvas</h3>
        <button id="close-canvas-btn" class="btn-close">âœ•</button>
      </div>

      <canvas id="studio-canvas"></canvas>

      <div class="canvas-tools">
        <button class="btn-tool" id="clear-canvas-btn">Clear</button>
        <button class="btn-tool" id="export-canvas-btn">Export</button>
        <button class="btn-tool" id="screenshot-canvas-btn">Screenshot</button>
      </div>
    </div>

    <!-- Visual Editor Overlay -->
    <div id="visual-editor-overlay" class="visual-editor-overlay hidden">
      <div class="visual-editor-header">
        <h3>ğŸ¨ Visual Editor</h3>
        <div class="mode-switcher">
          <button class="mode-btn active" data-mode="design">Design</button>
          <button class="mode-btn" data-mode="code">Code</button>
          <button class="mode-btn" data-mode="split">Split</button>
        </div>
        <button id="close-visual-editor-btn" class="btn-close">âœ•</button>
      </div>

      <div class="visual-editor-main">
        <div class="components-palette">
          <h4>Components</h4>
          <div id="component-list" class="component-list"></div>
        </div>

        <div class="design-canvas" id="design-canvas"></div>

        <div class="properties-panel">
          <h4>Properties</h4>
          <div id="element-properties"></div>
        </div>
      </div>
    </div>

  </div>

  <!-- Status Bar -->
  <footer class="studio-footer">
    <div class="footer-left">
      <span id="status-indicator" class="status-indicator">â—</span>
      <span id="status-message">Ready</span>
    </div>

    <div class="footer-center">
      <span id="current-branch">main</span>
    </div>

    <div class="footer-right">
      <span id="cursor-position">Ln 1, Col 1</span>
      <span id="file-encoding">UTF-8</span>
      <span id="file-type">JavaScript</span>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="../tapes/tape-system.js"></script>
  <script src="../klh/orchestrator.js"></script>
  <script src="studio-system.js"></script>
  <script src="studio-ui.js"></script>

</body>
</html>
